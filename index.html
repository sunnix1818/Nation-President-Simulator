<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Nation Conquest Simulator</title>
<style>
html,body{margin:0;padding:0;overflow:hidden;background:#0b1020;color:white;font-family:Arial}
canvas{display:block}
#ui{
position:absolute;top:20px;left:20px;
background:rgba(0,0,0,.9);
padding:20px;border-radius:15px;
width:360px;border:2px solid #4a90e2
}
button{width:100%;margin:5px 0;padding:10px;
background:#4a90e2;border:none;border-radius:8px;
color:white;font-weight:bold;cursor:pointer}
#news{
position:absolute;bottom:20px;right:20px;
width:420px;height:300px;
overflow:auto;background:rgba(0,0,0,.85);
padding:15px;border-radius:15px;
border:2px solid orange
}
.news-item{margin-bottom:10px;padding:10px;
background:rgba(255,255,255,.1);border-left:5px solid orange}
.news-war{border-left-color:red}
.news-victory{border-left-color:#00ff88}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div id="ui">
<h2 id="nation">ğŸ‡®ğŸ‡¹ Italia</h2>
<p>ğŸ’° GDP: <span id="gdp"></span></p>
<p>âš”ï¸ Esercito: <span id="mil"></span></p>
<p>ğŸ° CittÃ : <span id="cities"></span></p>
<button onclick="attack()">ğŸš€ Attacca</button>
<button onclick="nextMonth()">â© Prossimo mese</button>
</div>

<div id="news"></div>

<script>
// ================= CANVAS =================
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
resize();
window.onresize = resize;

function resize(){
canvas.width = innerWidth;
canvas.height = innerHeight;
}

// ================= NEWS =================
function addNews(text,type=""){
const div=document.createElement("div");
div.className="news-item "+(type?`news-${type}`:"");
div.innerHTML=text;
document.getElementById("news").prepend(div);
}

// ================= DATI NAZIONI =================
const nations={
Italia:{flag:"ğŸ‡®ğŸ‡¹",x:.45,y:.6,gdp:2100,mil:95,cities:12,color:"#00ff88"},
USA:{flag:"ğŸ‡ºğŸ‡¸",x:.2,y:.45,gdp:28000,mil:520,cities:50,color:"#ff4444"},
Germania:{flag:"ğŸ‡©ğŸ‡ª",x:.42,y:.5,gdp:4400,mil:85,cities:35,color:"#ffd700"},
Francia:{flag:"ğŸ‡«ğŸ‡·",x:.38,y:.55,gdp:3100,mil:115,cities:38,color:"#ffffff"},
Russia:{flag:"ğŸ‡·ğŸ‡º",x:.65,y:.35,gdp:1850,mil:320,cities:60,color:"#4169e1"},
Cina:{flag:"ğŸ‡¨ğŸ‡³",x:.85,y:.55,gdp:19500,mil:450,cities:120,color:"#ff8c00"}
};

let game={
player:"Italia",
year:2026,
month:1,
troops:[]
};

// ================= TROOP =================
class Troop{
constructor(fx,fy,tx,ty,target){
this.x=fx;this.y=fy;
this.tx=tx;this.ty=ty;
this.t=0;this.target=target;
}
update(){
this.t+=0.015;
this.x+= (this.tx-this.x)*0.05;
this.y+= (this.ty-this.y)*0.05;
if(this.t>=1){
resolveBattle(this.target);
return false;
}
return true;
}
draw(){
ctx.fillStyle="yellow";
ctx.beginPath();
ctx.arc(this.x,this.y,4,0,Math.PI*2);
ctx.fill();
}
}

// ================= LOGICA =================
function resolveBattle(target){
if(Math.random()<0.6){
nations[target].cities--;
addNews(`ğŸ° CittÃ  conquistata in ${target}!`,"victory");
}else{
addNews(`âŒ Attacco fallito contro ${target}`,"war");
}
}

function attack(){
const targets=Object.keys(nations).filter(n=>n!==game.player);
const t=targets[Math.floor(Math.random()*targets.length)];
const p=nations[game.player];
const e=nations[t];

if(p.mil<20){
addNews("âŒ Esercito insufficiente","war");
return;
}

p.mil-=15;

const fx=p.x*canvas.width;
const fy=p.y*canvas.height;
const tx=e.x*canvas.width;
const ty=e.y*canvas.height;

for(let i=0;i<5;i++){
game.troops.push(new Troop(
fx+Math.random()*30,
fy+Math.random()*30,
tx,ty,t
));
}

addNews(`ğŸš€ Attacco lanciato contro ${t}`,"war");
}

function nextMonth(){
game.month++;
addNews(`ğŸ“… ${game.month}/${game.year}`);
updateUI();
}

// ================= UI =================
function updateUI(){
const p=nations[game.player];
document.getElementById("gdp").textContent=p.gdp+" B";
document.getElementById("mil").textContent=p.mil;
document.getElementById("cities").textContent=p.cities;
}
updateUI();

// ================= RENDER =================
function render(){
ctx.clearRect(0,0,canvas.width,canvas.height);

// oceano
ctx.fillStyle="#1e3a8a";
ctx.fillRect(0,0,canvas.width,canvas.height);

// continenti
ctx.fillStyle="#166534";
ctx.fillRect(canvas.width*.1,canvas.height*.3,canvas.width*.3,canvas.height*.4);
ctx.fillRect(canvas.width*.3,canvas.height*.45,canvas.width*.25,canvas.height*.3);
ctx.fillRect(canvas.width*.75,canvas.height*.35,canvas.width*.2,canvas.height*.4);

// nazioni
Object.values(nations).forEach(n=>{
const x=n.x*canvas.width;
const y=n.y*canvas.height;
ctx.fillStyle=n.color;
ctx.beginPath();
ctx.arc(x,y,22,0,Math.PI*2);
ctx.fill();
ctx.font="28px Arial";
ctx.textAlign="center";
ctx.textBaseline="middle";
ctx.fillText(n.flag,x,y);
});

// truppe
game.troops=game.troops.filter(t=>t.update());
game.troops.forEach(t=>t.draw());
}

// ================= LOOP =================
function loop(){
render();
requestAnimationFrame(loop);
}
loop();

// START
addNews("ğŸš€ Nation Conquest Simulator avviato!");
</script>
</body>
</html>
